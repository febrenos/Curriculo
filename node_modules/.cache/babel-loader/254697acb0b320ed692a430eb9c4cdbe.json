{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\thiag\\\\OneDrive\\\\\\xC1rea de Trabalho\\\\reactFilmes-master\\\\React.Filmes\\\\React-filmes\\\\src\\\\Pages\\\\Filmes\\\\Index.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport './style.css';\nimport Footer from '../../components/Footer/Index';\nimport Header from '../../components/Header/Index';\nimport cinema from '../../assets/imagens/cinema.png';\nimport Input from '../../components/Input/Index';\nimport Button from '../../components/Button/Index';\nimport refreshImg from '../../assets/imagens/refresh.png';\nimport trashImg from '../../assets/imagens/trash.png';\nimport Select from '../../components/Select/Index';\n\nfunction Filmes() {\n  _s();\n\n  const [filme, setFilme] = useState('');\n  const [idFilme, setIdFilme] = useState(0);\n  const [genero, setGenero] = useState('');\n  const [filmes, setFilmes] = useState([]);\n  const [generos, setGeneros] = useState([]);\n  useEffect(() => {\n    listar();\n    listarGeneros();\n  }, []);\n\n  const listar = () => {\n    const url = 'http://localhost:5000/api/Filmes';\n    fetch(url, {\n      headers: {\n        authorization: 'bearer ' + localStorage.getItem('token-filmes')\n      },\n      method: 'GET'\n    }).then(Response => Response.json()).then(dados => {\n      console.log(dados);\n      console.log(dados.titulo);\n      setFilmes(dados);\n    }).catch(err => {\n      console.error(err); //retornar um erro \n    });\n  };\n\n  const salvar = () => {\n    const form = {\n      Titulo: filme,\n      IdGenero: genero\n    };\n    const method = idFilme === 0 ? 'POST' : 'PUT';\n    const url = idFilme === 0 ? 'http://localhost:5000/api/Filmes' : 'http://localhost:5000/api/Filmes/' + idFilme;\n    fetch(url, {\n      headers: {\n        'Content-Type': 'application/json;charset=utf-8',\n        authorization: 'bearer ' + localStorage.getItem('token-filmes')\n      },\n      method: method,\n      body: JSON.stringify(form)\n    }).then(() => {\n      console.log(form);\n      console.log(url);\n      console.log(method);\n      setIdFilme(0);\n      setFilme('');\n      listar();\n      listarGeneros();\n    }).catch(err => {\n      console.error(err); //retornar um erro \n    });\n  };\n\n  const trash = id => {\n    const url = 'http://localhost:5000/api/Filmes/' + id;\n    fetch(url, {\n      headers: {\n        'Content-Type': 'application/json;charset=utf-8',\n        authorization: 'bearer ' + localStorage.getItem('token-filmes')\n      },\n      method: 'DELETE'\n    }).then(Response => Response.json()).then(dados => {\n      listar();\n    }).catch(err => {\n      console.error(err); //retornar um erro \n    });\n  };\n\n  const listarGeneros = () => {\n    const url = 'http://localhost:5000/api/Generos';\n    fetch(url, {\n      headers: {\n        authorization: 'bearer ' + localStorage.getItem('token-filmes')\n      },\n      method: 'GET'\n    }).then(Response => Response.json()).then(dados => {\n      setGeneros(dados);\n    }).catch(err => {\n      console.error(err); //retornar um erro \n    });\n  };\n\n  const refresh = id => {\n    const url = 'http://localhost:5000/api/Filmes/' + id;\n    fetch(url, {\n      headers: {\n        authorization: 'bearer ' + localStorage.getItem('token-filmes')\n      },\n      method: 'GET'\n    }).then(Response => Response.json()).then(dados => {\n      setIdFilme(dados.IdFilme);\n      setFilme(dados.titulo);\n      listar();\n    }).catch(err => {\n      console.error(err); //retornar um erro \n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"filmes-div\",\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      description: \"Cadastre os filmes de sua prefer\\xEAncia\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"film\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fil\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Filmes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: cinema\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 10\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rumo\",\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"tabe\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Listar Filmes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: filmes.map(item => {\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: item.idFilme\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 161,\n                columnNumber: 22\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: item.idGeneroNavigation.nome\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 22\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: item.titulo\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 22\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"icon\",\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: refreshImg,\n                  onClick: () => refresh(item.idFilme)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 165,\n                  columnNumber: 22\n                }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: trashImg,\n                  onClick: () => trash(item.idFilme)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 166,\n                  columnNumber: 22\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 164,\n                columnNumber: 22\n              }, this)]\n            }, item.idFilme, true, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 20\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: event => {\n        event.preventDefault();\n        salvar();\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cad-filmes\",\n        children: [/*#__PURE__*/_jsxDEV(Input, {\n          className: \"inputs\",\n          onChange: e => setFilme(e.target.value),\n          name: \"genero\",\n          type: \"text\",\n          label: \"Cadastrar filmes\",\n          placeholder: \"Digite seu filme\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 10\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          id: \"align-sele\",\n          className: \"selects\",\n          name: \"generos\",\n          onChange: e => setGenero(e.target.value),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"0\",\n            selected: true,\n            disabled: true,\n            hidden: true,\n            children: \"Selecione\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 10\n          }, this), generos.map(item => {\n            return /*#__PURE__*/_jsxDEV(\"option\", {\n              value: item.idGenero,\n              children: item.nome\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 22\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          className: \"buttons\",\n          name: \"Salvar\",\n          value: \"Salvar\",\n          type: \"button\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 134,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Filmes, \"HOw3demZ03PSnx4EPbOO6aMIKYw=\");\n\n_c = Filmes;\nexport default Filmes;\n\nvar _c;\n\n$RefreshReg$(_c, \"Filmes\");","map":{"version":3,"sources":["C:/Users/thiag/OneDrive/Área de Trabalho/reactFilmes-master/React.Filmes/React-filmes/src/Pages/Filmes/Index.tsx"],"names":["React","useEffect","useState","Footer","Header","cinema","Input","Button","refreshImg","trashImg","Select","Filmes","filme","setFilme","idFilme","setIdFilme","genero","setGenero","filmes","setFilmes","generos","setGeneros","listar","listarGeneros","url","fetch","headers","authorization","localStorage","getItem","method","then","Response","json","dados","console","log","titulo","catch","err","error","salvar","form","Titulo","IdGenero","body","JSON","stringify","trash","id","refresh","IdFilme","map","item","idGeneroNavigation","nome","event","preventDefault","e","target","value","idGenero"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport './style.css';\nimport Footer from '../../components/Footer/Index';\nimport Header from '../../components/Header/Index';\nimport cinema from '../../assets/imagens/cinema.png';\nimport Input from '../../components/Input/Index';\nimport Button from '../../components/Button/Index';\nimport refreshImg from '../../assets/imagens/refresh.png';\nimport trashImg from '../../assets/imagens/trash.png';\nimport Select from '../../components/Select/Index';\n\nfunction Filmes() {\n\n    const [filme, setFilme] = useState('');\n    const [idFilme, setIdFilme] = useState(0);\n    const [genero, setGenero] = useState('');\n    const[filmes, setFilmes] = useState([]);\n    const[generos, setGeneros] = useState([]);\n\n  \n    useEffect(() =>{\n      listar();\n      listarGeneros();\n    },[]);\n\n    const listar = () =>{\n      const url = 'http://localhost:5000/api/Filmes';\n      fetch(url, {\n              headers:{\n                authorization: 'bearer '+ localStorage.getItem('token-filmes')\n              },\n              method: 'GET',\n          })\n          .then(Response => Response.json())\n          .then(dados=>{\n            console.log(dados);\n            console.log(dados.titulo)\n            setFilmes(dados);\n          })\n          .catch(err => {\n              console.error(err); //retornar um erro \n          });\n    };\n\n    const salvar = () =>{\n      const form ={\n        Titulo: filme,\n        IdGenero: genero\n      };\n  \n      const method = (idFilme === 0 ? 'POST' : 'PUT');\n  \n      const url = (idFilme === 0 ? 'http://localhost:5000/api/Filmes' : 'http://localhost:5000/api/Filmes/'+ idFilme);\n  \n    fetch(url, {\n            headers:{\n              'Content-Type': 'application/json;charset=utf-8',\n              authorization: 'bearer '+ localStorage.getItem('token-filmes')\n            },\n            method: method,\n            body: JSON.stringify(form)\n        })\n        .then(() =>{\n          console.log(form);\n          console.log(url);\n          console.log(method);\n          setIdFilme(0);\n          setFilme('');\n          listar();\n          listarGeneros();\n        })\n        .catch(err => {\n          console.error(err); //retornar um erro \n      })\n    };\n\n\n    const trash = (id:any) =>{\n      const url = 'http://localhost:5000/api/Filmes/'+id;\n    fetch(url, {\n            headers:{\n              'Content-Type': 'application/json;charset=utf-8',\n              authorization: 'bearer '+ localStorage.getItem('token-filmes')\n            },\n            method: 'DELETE'\n        })\n      .then(Response => Response.json())\n      .then(dados=>{\n        listar();\n      })\n      .catch(err => {\n        console.error(err); //retornar um erro \n    })\n  };\n    \n\n    const listarGeneros = () =>{\n      const url = 'http://localhost:5000/api/Generos';\n      fetch(url, {\n              headers:{\n                authorization: 'bearer '+ localStorage.getItem('token-filmes')\n              },\n              method: 'GET',\n          })\n          .then(Response => Response.json())\n          .then(dados=>{\n            setGeneros(dados);\n          })\n          .catch(err => {\n              console.error(err); //retornar um erro \n          });\n    };\n\n    const refresh = (id:any) =>{\n      const url = 'http://localhost:5000/api/Filmes/'+id;\n      fetch(url, {\n              headers:{\n                authorization: 'bearer '+ localStorage.getItem('token-filmes')\n              },\n              method: 'GET'\n          })\n          .then(Response => Response.json())\n        .then(dados=>{\n          setIdFilme(dados.IdFilme);\n          setFilme(dados.titulo);\n          listar();\n        })\n        .catch(err => {\n          console.error(err); //retornar um erro \n      })\n    }\n  \n  return (\n    <div className=\"filmes-div\">\n        <Header description=\"Cadastre os filmes de sua preferência\"/>\n\n         <div className=\"film\">\n          <div className=\"fil\">\n            <h1>Filmes</h1>\n            <img src={cinema}/>\n          </div>\n        </div>\n\n        <div className=\"rumo\">\n\n          <table className=\"tabe\">\n            <h3>Listar Filmes</h3>\n          <thead>\n            <tr>\n              <th></th>\n              <th></th>\n              <th></th>\n              <th></th>\n            </tr>\n          </thead>\n          <tbody>\n            {\n               filmes.map((item: any) =>{\n                 return(\n                   <tr key={item.idFilme}>\n                     <td>{item.idFilme}</td>\n                     <td>{item.idGeneroNavigation.nome}</td>\n                     <td>{item.titulo}</td>\n                     <td className=\"icon\">\n                     <img src={refreshImg} onClick={() => refresh(item.idFilme)} />  \n                     <img src={trashImg} onClick={() => trash(item.idFilme)}/>  \n                     </td>\n                   </tr>\n                )\n               })\n            }\n          </tbody>\n        </table>\n        </div>\n\n      <form onSubmit={event =>{\n         event.preventDefault();\n         salvar();\n         }}>\n\n        <div className=\"cad-filmes\">\n         <Input className=\"inputs\" onChange={e => setFilme(e.target.value)} name=\"genero\" type=\"text\" label=\"Cadastrar filmes\" placeholder=\"Digite seu filme\"/>\n          <Select id=\"align-sele\" className=\"selects\" name=\"generos\" onChange={e => setGenero(e.target.value)}>\n         <option value=\"0\" selected disabled hidden>Selecione</option> \n          {\n            generos.map((item: any) => {\n              return <option value={item.idGenero}>{item.nome}</option>\n            })\n          }                          \n         </Select>\n         \n          <Button className=\"buttons\" name=\"Salvar\" value=\"Salvar\" type=\"button\"/>\n        </div>     \n\n      </form>\n        \n        <Footer/>\n    </div>\n  );\n}\n\nexport default Filmes;\n"]},"metadata":{},"sourceType":"module"}